2025-09-18 21:45:10,013 [ERROR] Chybí OPENAI_API_KEY v prostředí.
2025-09-18 21:50:01,455 [ERROR] Chybí OPENAI_API_KEY v prostředí.
2025-09-18 21:50:25,617 [ERROR] Chybí OPENAI_API_KEY v prostředí.
2025-09-18 21:51:39,009 [ERROR] Chybí OPENAI_API_KEY v prostředí.
2025-09-18 22:16:28,061 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-09-18 22:16:28,062 [INFO] Retrying request to /chat/completions in 0.464527 seconds
2025-09-18 22:16:30,101 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-09-18 22:16:30,102 [INFO] Retrying request to /chat/completions in 0.760396 seconds
2025-09-18 22:16:32,773 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-09-18 22:16:32,774 [ERROR] Chyba volání OpenAI: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
2025-09-18 22:20:09,663 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 22:20:09,677 [INFO] FILES: {"image": "./plant.jpg", "weather_now": "./weather_now.json", "weather_forecast": "./weather_forecast.json", "history": "./watering_history.json", "plant": "./plant.json"}
2025-09-18 22:20:09,677 [INFO] RESPONSE: {"zalevat": true, "oduvodneni": "Půdní vlhkost je na 35 %, což naznačuje potřebu zálivky. Poslední zálivka byla před 5 dny a očekávané srážky jsou minimální."}
2025-09-18 22:21:41,271 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 22:21:41,288 [INFO] FILES: {"image": "./plant.jpg", "weather_now": "./weather_now.json", "weather_forecast": "./weather_forecast.json", "history": "./watering_history.json", "plant": "./plant.json"}
2025-09-18 22:21:41,288 [INFO] RESPONSE: {"zalevat": false, "oduvodneni": "Rostlina byla naposledy zalita před 3 dny a aktuální počasí je příznivé s nízkou pravděpodobností srážek. Vzhledem k tomu, že poslední zálivka byla dostatečná, není potřeba zalévat."}
2025-09-18 22:23:08,503 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 22:23:08,516 [INFO] FILES: {"image": "./plant.jpg", "weather_now": "./weather_now.json", "weather_forecast": "./weather_forecast.json", "history": "./watering_history.json", "plant": "./plant.json"}
2025-09-18 22:23:08,517 [INFO] RESPONSE: {"zalevat": false, "oduvodneni": "Rostlina byla naposledy zalévána před 5 dny a aktuální počasí je příznivé s očekávanými srážkami v následujících 48 hodinách. Není potřeba zalévat."}
2025-09-18 22:31:56,293 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 22:31:56,304 [INFO] FILES: {"image": "./plant.jpg", "weather_now": "./weather_now.json", "weather_forecast": "./weather_forecast.json", "history": "./watering_history.json", "plant": "./plant.json"}
2025-09-18 22:31:56,304 [INFO] RESPONSE: {"zalevat": false, "oduvodneni": "Rostlina byla zalita před 3 dny a očekává se déšť během dne. Aktuální vlhkost vzduchu je 60%, což naznačuje, že rostlina pravděpodobně nepotřebuje další zálivku."}
2025-09-18 22:32:52,450 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 22:32:52,464 [INFO] FILES: {"image": "./plant.jpg", "weather_now": "./weather_now.json", "weather_forecast": "./weather_forecast.json", "history": "./watering_history.json", "plant": "./plant.json"}
2025-09-18 22:32:52,464 [INFO] RESPONSE: {"zalevat": false, "oduvodneni": "Rostlina byla zalita před 3 dny a aktuální vlhkost vzduchu je 60%. Očekávané srážky nejsou významné, ale vzhledem k předchozím zálivkám a aktuálním podmínkám není potřeba zalévat."}
2025-09-18 22:34:40,119 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 22:34:40,132 [INFO] FILES: {"image": "./plant.jpg", "weather_now": "./weather_now.json", "weather_forecast": "./weather_forecast.json", "history": "./watering_history.json", "plant": "./plant.json"}
2025-09-18 22:34:40,133 [INFO] RESPONSE: {"zalevat": false, "oduvodneni": "Rostlina byla zalita před 3 dny a aktuální počasí je slunečné s nízkou vlhkostí. Očekávané srážky nejsou dostatečné, ale rostlina by měla být schopna přežít bez další zálivky."}
2025-09-18 22:35:52,373 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 22:35:52,387 [INFO] FILES: {"image": "./plant.jpg", "weather_now": "./weather_now.json", "weather_forecast": "./weather_forecast.json", "history": "./watering_history.json", "plant": "./plant.json"}
2025-09-18 22:35:52,387 [INFO] RESPONSE: {"zalevat": false, "oduvodneni": "Před 8 dny byla zálivka 2500 ml a aktuální počasí je slunečné s nízkou vlhkostí. Očekávané srážky jsou také nízké, takže rostlina by měla mít dostatek vody."}
2025-09-18 22:41:10,028 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 22:41:10,038 [INFO] FILES: {"image": "./plant.jpg", "weather_now": "./weather_now.json", "weather_forecast": "./weather_forecast.json", "history": "./watering_history.json", "plant": "./plant.json"}
2025-09-18 22:41:10,039 [INFO] RESPONSE: {"zalevat": true, "oduvodneni": "Teplota 32°C a vlhkost 30% naznačují sucho. Poslední zálivka před 8 dny, 2500 ml. Doporučuji zalít, než se ochladí."}
2025-09-18 22:45:47,025 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 22:45:47,039 [INFO] FILES: {"image": "./plant.jpg", "weather_now": "./weather_now.json", "weather_forecast": "./weather_forecast.json", "history": "./watering_history.json", "plant": "./plant.json"}
2025-09-18 22:45:47,039 [INFO] RESPONSE: {"zalevat": false, "oduvodneni": "Teplota 32°C, vlhkost 30%, 5 dní od poslední zálivky 6000 ml. Předpověď srážek 20% za 13 h, doporučuji počkat."}
2025-09-18 22:55:35,161 [INFO] PROMPT_MESSAGES:
[
  {
    "role": "system",
    "content": "Dnes je 2025-09-18. Rozhodni, zda **dnes** zalít rostlinu. Máš fotku, datum/objem poslední zálivky, aktuální počasí a krátkodobou předpověď. Odpověz **pouze** jako JSON přesně tohoto tvaru: {\"zalevat\": <true|false>, \"oduvodneni\": \"<stručné odůvodnění v češtině>\"}"
  },
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "Poslední zálivka: 2025-09-17T09:30:00 (3000 ml)\n\nKontext rostliny: neznámý\n\nAktuální počasí: {'temp_c': 32.0, 'humidity_pct': 30.0, 'precipitation_mm': 0.0, 'cloudcover_pct': 0.0, 'description': 'slunecno'}\n\nPředpověď (prvních 12 záznamů): [{'time': datetime.datetime(2025, 9, 19, 12, 0), 'precip_prob_pct': 20.0, 'expected_precip_mm': 0.0, 'temp_c': 24.0, 'humidity_pct': 50.0}, {'time': datetime.datetime(2025, 9, 19, 18, 0), 'precip_prob_pct': 35.0, 'expected_precip_mm': 0.0, 'temp_c': 20.0, 'humidity_pct': 65.0}]"
      },
      {
        "type": "image_url",
        "image_url": {
          "url": "<image-data-url-redacted>"
        }
      }
    ]
  }
]
2025-09-18 22:55:39,546 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 22:55:39,555 [INFO] RESPONSE: {"zalevat": false, "oduvodneni": "Rostlina byla zalita včera a aktuální počasí je teplé a suché, což naznačuje, že by mohla mít dostatek vody."}
2025-09-18 23:01:40,547 [INFO] PROMPT_MESSAGES:
[
  {
    "role": "system",
    "content": "Dnes je 2025-09-18. Rozhodni, zda **dnes** zalít rostlinu. Máš fotku, datum/objem poslední zálivky, aktuální počasí a krátkodobou předpověď. Odpověz **pouze** jako JSON přesně tohoto tvaru: {\"zalevat\": <true|false>, \"oduvodneni\": \"<stručné odůvodnění v češtině>\"}"
  },
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "Poslední zálivka: 2025-09-15T09:30:00 (3000 ml)\n\nKontext rostliny: {\"species\":\"rajčata\",\"notes\":null}\n\nAktuální počasí: {'temp_c': 32.0, 'humidity_pct': 30.0, 'precipitation_mm': 0.0, 'cloudcover_pct': 0.0, 'description': 'slunecno'}\n\nPředpověď (prvních 12 záznamů): [{'time': datetime.datetime(2025, 9, 19, 12, 0), 'precip_prob_pct': 20.0, 'expected_precip_mm': 0.0, 'temp_c': 24.0, 'humidity_pct': 50.0}, {'time': datetime.datetime(2025, 9, 19, 18, 0), 'precip_prob_pct': 35.0, 'expected_precip_mm': 0.0, 'temp_c': 20.0, 'humidity_pct': 65.0}]"
      },
      {
        "type": "image_url",
        "image_url": {
          "url": "<image-data-url-redacted>"
        }
      }
    ]
  }
]
2025-09-18 23:01:44,804 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 23:01:44,818 [INFO] RESPONSE: {"zalevat": true, "oduvodneni": "Vysoké teploty a nízká vlhkost vzduchu vyžadují další zálivku."}
2025-09-18 23:02:16,550 [INFO] PROMPT_MESSAGES:
[
  {
    "role": "system",
    "content": "Dnes je 2025-09-18. Rozhodni, zda **dnes** zalít rostlinu. Máš fotku, datum/objem poslední zálivky, aktuální počasí a krátkodobou předpověď. Odpověz **pouze** jako JSON přesně tohoto tvaru: {\"zalevat\": <true|false>, \"oduvodneni\": \"<stručné odůvodnění v češtině>\"}"
  },
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "Poslední zálivka: 2025-09-15T09:30:00 (3000 ml)\n\nKontext rostliny: {\"species\":\"rajčata\",\"notes\":\"ve skleníku\"}\n\nAktuální počasí: {'temp_c': 32.0, 'humidity_pct': 30.0, 'precipitation_mm': 0.0, 'cloudcover_pct': 0.0, 'description': 'slunecno'}\n\nPředpověď (prvních 12 záznamů): [{'time': datetime.datetime(2025, 9, 19, 12, 0), 'precip_prob_pct': 20.0, 'expected_precip_mm': 0.0, 'temp_c': 24.0, 'humidity_pct': 50.0}, {'time': datetime.datetime(2025, 9, 19, 18, 0), 'precip_prob_pct': 35.0, 'expected_precip_mm': 0.0, 'temp_c': 20.0, 'humidity_pct': 65.0}]"
      },
      {
        "type": "image_url",
        "image_url": {
          "url": "<image-data-url-redacted>"
        }
      }
    ]
  }
]
2025-09-18 23:02:22,091 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 23:02:22,104 [INFO] RESPONSE: {"zalevat": true, "oduvodneni": "Rostliny potřebují vodu při vysokých teplotách a nízké vlhkosti, navíc poslední zálivka byla před třemi dny."}
2025-09-18 23:03:45,592 [INFO] PROMPT_MESSAGES:
[
  {
    "role": "system",
    "content": "Dnes je 2025-09-18. Rozhodni, zda **dnes** zalít rostlinu. Máš fotku, datum/objem poslední zálivky, aktuální počasí a krátkodobou předpověď. Odpověz **pouze** jako JSON přesně tohoto tvaru: {\"zalevat\": <true|false>, \"oduvodneni\": \"<stručné odůvodnění v češtině>\"}"
  },
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "Poslední zálivka: 2025-09-17T09:30:00 (3000 ml)\n\nKontext rostliny: {\"species\":\"rajčata\",\"notes\":\"ve skleníku\"}\n\nAktuální počasí: {'temp_c': 32.0, 'humidity_pct': 30.0, 'precipitation_mm': 0.0, 'cloudcover_pct': 0.0, 'description': 'slunecno'}\n\nPředpověď (prvních 12 záznamů): [{'time': datetime.datetime(2025, 9, 19, 12, 0), 'precip_prob_pct': 20.0, 'expected_precip_mm': 0.0, 'temp_c': 24.0, 'humidity_pct': 50.0}, {'time': datetime.datetime(2025, 9, 19, 18, 0), 'precip_prob_pct': 35.0, 'expected_precip_mm': 0.0, 'temp_c': 20.0, 'humidity_pct': 65.0}]"
      },
      {
        "type": "image_url",
        "image_url": {
          "url": "<image-data-url-redacted>"
        }
      }
    ]
  }
]
2025-09-18 23:03:50,350 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-18 23:03:50,359 [INFO] RESPONSE: {"zalevat": false, "oduvodneni": "Rostlina byla naposledy zalita včera a aktuální počasí je velmi teplé a suché, což naznačuje, že by mohla být dostatečně zavlažena."}
